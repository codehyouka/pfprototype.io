var util_core={};
var main=require("./library/main");
var core=require("./library/coresupport");
module.exports=util_core;


var main_helper=main.helper;
var main_core=core.helper;


util_core.parseString=function(s){
        
        var str="";
        var str_strt="";
        var str_end="";
        var inc=0;
        var inc_main; 
         if(util_core.has(s)){
        if(Object.prototype.toString.call(s)==="[object Object]"){
                str_strt="{";
                str_end="}";
                
                
        
                util_core.each(s,function(i,m){
                
        inc_main=((inc<util_core.count(s)-1)?",":"");
                if(typeof(m)==="object" && m!=null){
                str+=main_helper.datastring(i)+":"+main_helper.returnLoop(m,util_core.parseString,inc_main);
        
                }else{
                str+=main_helper.datastring(i)+":"+main_helper.datastring(m)+""+inc_main;
                }
                inc++;
                });
                
        }
        else if(Object.prototype.toString.call(s)==="[object Array]"){
        
                        str_strt="[";
                        str_end="]";
                        
                util_core.each(s,function(i,m){
                        inc_main=((inc<util_core.count(s)-1)?",":"");
                        if(typeof(m)==="object"){
        
                        str+=main_helper.returnLoop(m,util_core.parseString,inc_main);
                        }else{
                        str+=main_helper.datastring(m)+""+inc_main;
                        }
                inc++;
                        });
        }
        }
        
        return str_strt+str+str_end;
};

util_core.parseJson=function(s){
        
        var str_len=s.length;
        var sub_str=s.substring(1,str_len-1);
        var sub_str_split=sub_str.split(",");
        var j;
        
        if (/^[\],:{}\s]*$/.test(s.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')
                                .replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, ']')
                                .replace(/(?:^|:|,)(?:\s*\[)+/g, ''))) {
                                                
                                                if(s.length>0 && !/^\s*$/.test(s)) j = eval('(' + s + ')');
                                                        
                                                        }
                                        return j;		
};
util_core.has=main_core.has;
util_core.ifUndefined=main_core.ifUndefined;
util_core.each=main_core.each;
